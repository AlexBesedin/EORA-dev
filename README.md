# EORA Project Chatbot

Ссылка на чат-бот: https://t.me/trxxxkkasfnnjanfas_bot

Чат-бот разработанный для предоставления информации о проектах, над которыми работала компания EORA. Бот поддерживает пользователей, отвечая на вопросы и предоставляя краткую информацию о решениях, реализованных EORA.

# Что сделано:
- Спарсил информацию о проектах с ссылок в тестовом файле.
- Реализовал асинхронного чат-бота на основе aiogram для работы с Telegram.
- Настроил базу данных PostgreSQL для хранения данных о проектах и облегчения асинхронного поиска релевантной информации + Alembic Миграции
- Использовал библиотеку pymorphy3 для обработки запросов пользователя с целью лемматизации, что улучшает поиск и повышает релевантность найденных данных.
- Настроил взаимодействие с моделью OpenAI GPT-3.5 Turbo для генерации кратких и "человеческих" ответов на вопросы пользователя на основе существующих данных о проектах.


## Что не сработало так, как хотелось бы:
- Интерфейс генерации ответа от OpenAI GPT-3.5 иногда выдавал слишком длинные которые резали слова в ответе или ответы которые не всегда отвечают по сути заданого вопроса. Если например спрашиваю, какие проекты вы делали для Додо, может выдавать не те ответы.
- Лемматизация и фильтрация по стоп-словам не всегда давали идеальные результаты, и в некоторых случаях некоторые релевантные проекты не попадали в итоговый список.

## Используемые технологии
- Python 3.11.9
- aiogram 3.10.0
- requests 2.32.3
- python-dotenv 1.0.1
- SQLAlchemy 2.0.20
- psycopg2-binary 2.9.7
- asyncpg 0.28.0
- Alembic 1.13.2
- OpenAI 1.51.0
- pymorphy3 2.0.2
- Poetry (для управления зависимостями)

## Использование OpenAI с прокси
В этом проекте вы можете использовать как прокси-API для взаимодействия с OpenAI, так и напрямую подключиться к их официальному API, в зависимости от настройки.

Переменные окружения
OPENAI_TOKEN: Токен API для доступа к OpenAI.

- Пример: OPENAI_TOKEN="sk-1g3CVHTghq8WWGB"
PROXYAPI_URL: (Опционально) URL прокси-сервера для работы с OpenAI.

- Пример: PROXYAPI_URL=https://api.proxyapi.ru/openai/v1
Если вы хотите использовать OpenAI напрямую, не указывайте эту переменную.

## Запуск проекта через Docker
Создайте файл .env в корневой директории проекта.  Пример:

```sh
OPENAI_TOKEN=sk-1g3CVHTghq8WsssssssssssssssssWGB
POSTGRES_DB=db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
PROXYAPI_URL=https://api.proxyapi.ru/openai/v1
```
Запустите проект с помощью следующей команды:

```sh
docker compose -f docker-compose.yml up --build
```

Выполните Alembic миграции, чтобы инициализировать таблицы в базе данных. Для этого выполните следующую команду:

```sh
docker compose exec infra-eora-bot alembic upgrade head
```

